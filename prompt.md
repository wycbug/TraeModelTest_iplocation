现在你的任务是利用Cloudflare Workers的full-stack能力配合IP高精度地理位置查询API实现一个项目，前端允许用户输入IP地址或自动获取用户IP，查询该IP的详细地理位置信息，并在地图上可视化展示位置，支持批量查询和数据导出。

## 具体实现要求：

### 前端功能：
1. **IP输入界面**：
   - 提供IP地址输入框，支持IPv4和IPv6格式
   - "获取我的IP"按钮，自动获取用户当前IP
   - IP格式验证和实时提示
2. **位置信息展示**：
   - 以卡片形式展示查询结果
   - 显示字段：IP地址、详细地址、省份、城市、区县、经纬度等
   - 经纬度信息以坐标形式展示
3. **地图可视化**：
   - 集成地图组件，在地图上标注IP位置
   - 支持地图缩放和位置详情查看
   - 显示位置标记和信息窗口
4. **批量查询功能**：
   - 支持输入多个IP地址进行批量查询
   - 以表格形式展示批量查询结果
   - 支持在地图上同时显示多个位置点
5. **数据导出**：
   - 支持导出单个查询结果为JSON
   - 支持导出批量查询结果为Excel或CSV
   - 导出内容包含完整的地理位置信息

### 后端逻辑：
1. 在`./worker/index.ts`中实现API代理
2. 处理单个和批量IP查询请求
3. 调用IP地理位置API获取数据
4. 实现IP格式验证和错误处理
5. 添加查询频率限制和缓存机制
6. 支持获取客户端真实IP的功能

### API集成：
- 根据apidoc.md文档中的API规范实现
- 支持GET请求，参数包括ip（可选，不填则查询请求者IP）
- 处理API返回的地理位置数据，包括经纬度和地址信息
- 实现IPv4和IPv6地址的支持

### 高级功能：
- IP地址归属地统计分析
- 历史查询记录保存
- 地理位置数据可视化图表
- 支持IP地址段查询

我已经帮你完成了示例项目初始化，现在请你修改代码实现本项目的目标。

**API文档：** apidoc.md  
**后端逻辑：** ./worker/index.ts  
**前端代码：** ./src
